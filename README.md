# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

В работе применяется паттерн MVP, где:

components/models.ts - отвечает за работу бизнесс-логики
components/views.ts - отвечает за отображение 
components/index.ts - презентор, отвевает за соединение models и views
components/modal.ts - отвечающий за работу модального окна

*********

события: 
cards:loading - рендер карточек в DOM
basket:on - открытие модального окна "Корзина"
cardPreview:on - открытие модального окна "Превью карточки"

*********

View:

папка Templates - тут ищутся все темлпейнты и большинство элементов DOM
класс PageView - класс отвечает за хранение карточек товара с сервера и рендер их в DOM, работает в паре с внутренним классом ProductCardCreate, который в свою очередь создает карточку товара и отдает ее на рендер.
Так же инициирует событие открытия модального окна "Превью карточки" (cardPreview:on)

файл objClass - содержатся классы элементов для их передачи в нужные методы

класс PreviewCardContent - у него еодинственный метод setContent, отвечающий за установку данных с карточки товара в модальное окно

класс BasketView - занимается отображением корзины

методы: 

clearBasket - метод очищает список товаров в корзине

isListChildren - метод проверяет есть ли в корзине товары, исключая технические элементы по типу параграфа с текстом "корзина пустая", и в зависимости от исхода возвращаеет true или false

checkBasketButton - метод на основе метода выше блокирует/разблокируют кнопку корзины и вставляет параграф с текстом, если в корзине отсутствуют товаары

clearTotalIfBasketEmpty - метод так же на основе метода isListChildren устанавливает содержимое ценника товара - 0, если таковых нет в корзине

renderBasket - метод добавляет выбранную карточку в корзину


класс PreviewCardContent - устанавливает содержимое карточки в превью карточки

класс SearchElementsCurrentCard - получает данные текущей карточки


класс ModalWindow - класс, работающий с модальным окном, при инициализации находит пару элементов модального окна: кнопку закрытия и контейнер контента, так же при инициализации вешает обработчики на закрытие модального окна и для этой цели блокирует всплытие события

методы: 

setContent - устанавливает нужное модальное окно в модальный контейнер
openModal/closeModal - открытие/закрытие модального окна 
render - метод возвращает готовый контейнер модального окна

*********

Model:

класс Model - логика проекта

методы: 

getCards - делает запрос на сервер и получает данные

getBasketProducts - возвращает содержимое корзины

isInBasket - метод ищет определенный id и возвращает true или false

addProductToBasket - метод добавляет id в коллекцию Set basketIds, где хранятся все id продуктов в корзине, исключая повторяющиеся, если такого еще нет

handleOnceOrMoreClick - метод проверяет клик по кнопке выбора товара, если их больше 1 - блокирует кнопку переданным методом

removeProductById - метод удаляет товар по индексу из Set колекции м обновляет общую стоимость товаров в корзине с помощью метода upDateIndexAndPrice

getSumOfPrices - метод считает общую стоимость товаров в корзине


класс Validation - класс занимается валидацией форм, был взят из проектной работы 7 спринта, типизирован и немного видоизменен под текущий проект